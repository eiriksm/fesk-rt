<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FESK Real-Time Decoder</title>
<style>
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    padding: clamp(16px, 4vw, 32px);
    font-family: system-ui, sans-serif;
    line-height: 1.5;
    background: #f7f7f7;
  }
  .app {
    max-width: 720px;
    margin: 0 auto;
    background: #fff;
    padding: clamp(16px, 4vw, 32px);
    border-radius: 0;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
  }
  h1 {
    margin-top: 0;
    margin-bottom: 1rem;
    font-size: clamp(1.5rem, 2.5vw, 2rem);
  }
  button {
    padding: 0.6rem 1.1rem;
    border: 1px solid #ccc;
    border-radius: 0;
    background: #fff;
    cursor: pointer;
    font: inherit;
    transition:
      background-color 0.2s ease,
      border-color 0.2s ease,
      box-shadow 0.2s ease;
  }
  button:hover:not(:disabled),
  button:focus-visible {
    border-color: #888;
    background: #f0f0f0;
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
  }
  button:disabled {
    cursor: not-allowed;
    opacity: 0.6;
  }
  .row {
    margin: 1rem 0;
  }
  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }
  .controls button {
    flex: 1 1 220px;
    min-width: 140px;
  }
  .controls button:disabled {
    display: none;
  }
  details.debug-panel {
    margin-top: 1.5rem;
  }
  details.debug-panel summary {
    cursor: pointer;
    font-weight: 600;
  }
  .debug-panel-content {
    margin-top: 0.75rem;
    display: grid;
    gap: 1.25rem;
  }
  .debug-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }
  .debug-controls button {
    flex: 1 1 220px;
    min-width: 140px;
  }
  .debug-metrics {
    display: grid;
    gap: 0.5rem;
  }
  .debug-metric {
    display: flex;
    gap: 0.35rem;
    align-items: baseline;
    font-size: 0.95rem;
  }
  #out {
    border: 1px solid #ddd;
    border-radius: 0;
    padding: 12px;
    min-height: 6rem;
    background: #fafafa;
    display: grid;
    gap: 12px;
  }
  #out .provisional {
    opacity: 0.65;
    border-bottom: 1px dotted rgba(0, 0, 0, 0.4);
  }
  .out-bank {
    border: 1px solid #eee;
    border-radius: 0;
    padding: 10px 12px;
    background: #fff;
  }
  .out-bank-title {
    font-weight: 600;
    font-size: 0.95rem;
    color: #333;
    margin-bottom: 0.4rem;
  }
  .out-bank-body {
    white-space: pre-wrap;
    font:
      14px/1.5 ui-monospace,
      SFMono-Regular,
      Menlo,
      monospace;
    overflow-x: auto;
  }
  .decoded-ok {
    color: #0f7a3c;
    font-weight: 600;
  }
  @media (max-width: 480px) {
    .debug-metric strong {
      white-space: nowrap;
    }
  }
</style>

<div class="app">
  <h1>FESK Real-Time Decoder</h1>
  <div class="row controls">
    <button id="startBtn">Start üéôÔ∏è</button>
    <button id="stopBtn" disabled>Stop üö´</button>
    <button id="downloadBtn" disabled>Download WAV ‚¨áÔ∏è</button>
  </div>
  <details class="debug-panel">
    <summary>Debug</summary>
    <div class="debug-panel-content">
      <div class="debug-controls">
        <button id="sample1Btn">Play Sample 1 üîä</button>
        <button id="sample2Btn">Play Sample 2 üîä</button>
        <button id="sample3Btn">Play Sample 3 üîä</button>
        <button id="sample4Btn">Play Sample 4 üîä</button>
        <button id="sample5Btn">Play Sample 5 üîä</button>
      </div>
      <div class="debug-metrics" id="debugMetrics"></div>
    </div>
  </details>
  <div class="row"><strong>Decoded output:</strong></div>
  <div id="out"></div>
</div>

<script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@18.3.1?dev",
      "react-dom/client": "https://esm.sh/react-dom@18.3.1/client?dev"
    }
  }
</script>
<script type="module" src="./app.js"></script>
